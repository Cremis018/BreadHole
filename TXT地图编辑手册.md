# 《面包孔》的TXT地图文件编辑手册

面包孔的地图均是由 .txt 文件编写的，并且可读性极高。也就是说如果你只要严格遵守我们以下的格式约定和命名规定，无需任何专业工具，你也可以写出自己的地图来进行游玩。

## 1 概念

要先做出自己的地图文件，首先要搞清楚我们游戏里的一些概念，才能更好得让你做出更有趣和深度的关卡。

### 1.1 坐标

为了减少书写内容和开发方便，我们采用的坐标系统不能直接根据地图的行列数得出坐标位置，而是要经过一定的计算。在设计下，所有地板坐标的x值和y值都是奇数，而与地板相邻的衔接处，是在地板坐标的原基础上加上四向的单位长度，即加上(1,0)、(-1,0)、(0,1)、(0,-1)，所以得到的衔接处坐标的x值和y值，彼此都是非奇即偶的。但是所有的地图构成对象的坐标不会出现x值和y值都是偶数、存在负数的情况。

### 1.2 房间

房间就是地图的组成单元，每个房间都会有一个地板，然后一个地板会与它相邻的四个衔接处产生联系。根据游戏的移动方式，玩家必然待在房间里，即地板的坐标上，绝对不会出现在空房间或衔接处的坐标上。空房间即在地图设计的时候将这个坐标分配给了“虚空”，那么这里就什么都不会有，玩家也不可能出现在这个坐标上。

### 1.3 探测

玩家身上会存在一个探测组件，这个组件会将玩家所站立地板的坐标以及面前的衔接处的坐标返回给游戏系统，也就是说探测到的内容经常是有两个坐标的，这在设计触发事件的时候需要考虑周到。

## 2 地图部分

地图部分是地图文件的第一个部分，它描述了该关卡的地图轮廓长什么样子。

### 2.1 范围

需要表示地图部分，必须要在写之前用 **#** 画出一个地图的范围，即一个圈

```txt
###########
#地图的内容#
###########
```

只有这样，系统才能有效读取到地图描述在什么位置。

> *📄Note：当然，地图描述的每列内容不一定要连续的，中间可以被其他行的内容给分开，但是不建议这样做。*

### 2.2 绘制房间

当有足够的范围后，你就可以在这个由 **#** 构成的地图范围内设计地图的轮廓啦。

按照规定，目前提供了三种不同情况的房间。


|     符号     |  名称  | 含义                                                             |
| :----------: | :----: | ---------------------------------------------------------------- |
|    **#**    |  虚空  | 这个房间里什么都没有，完全被墙体隔开了，玩家不可能进入这里       |
| **O**或**o** | 未标记 | 这个房间还未被标记了，里面的内容会在没有被观测的情况下发生变化   |
| **X**或**x** | 已标记 | 这个房间已经被标记了，里面的内容在没有外力干涉下不会发生任何变化 |

以下是示例效果：

```txt
#######
#OOOXO#
#OO##O#
#OOOOO#
#######
```

> **ℹ️Tip**：在绘制地图的时候，我们推荐你使用等宽字体去书写地图描述，这样可以做到在视觉上每个单元的行列位置与实际情况是一一对应的，不容易看错写错。
